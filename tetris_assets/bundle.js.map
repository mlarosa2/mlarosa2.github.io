{"version":3,"sources":["webpack:///webpack/bootstrap 25671a2a1baee4989c9a","webpack:///./tetris_assets/js/tetris.js","webpack:///./tetris_assets/js/game.js","webpack:///./tetris_assets/js/board.js","webpack:///./tetris_assets/js/pieces/square.js","webpack:///./tetris_assets/js/pieces/piece.js","webpack:///./tetris_assets/js/pieces/color_constants.js","webpack:///./tetris_assets/js/pieces/line.js","webpack:///./tetris_assets/js/pieces/left_l.js","webpack:///./tetris_assets/js/pieces/right_l.js","webpack:///./tetris_assets/js/pieces/left_z.js","webpack:///./tetris_assets/js/pieces/right_z.js","webpack:///./tetris_assets/js/pieces/t.js","webpack:///./tetris_assets/js/game_view.js"],"names":["Game","require","GameView","document","addEventListener","canvas","getElementById","width","DIM_X","height","DIM_Y","ctx","getContext","game","start","mute","audio","paused","innerHTML","className","pause","play","Board","Square","Line","LeftL","RightL","LeftZ","RightZ","Tee","NUM_PIECES","board","pieces","score","nextPiece","menu","setInitials","allScores","BG_COLOR","FALL_RATE","OriginalFallRate","prototype","togglePause","renderPausedMenu","beginPath","rect","fillStyle","fill","lineWidth","strokeStyle","stroke","font","strokeText","fillText","renderGameOverMenu","renderMainMenu","removeMainMenu","style","opacity","randomPiece","choose","Math","floor","random","addPiece","piece","shift","push","name","setNextPiece","hideNextPiece","draw","clearRect","fillRect","forEach","setScore","scoreTag","increaseFallRate","movePiece","delta","length","i","location","checkForGameOver","isOver","lowestHighScore","setAllScores","renderHiScoreMenu","dbRefObject","firebase","database","ref","thisGame","on","snapshot","val","scores","hasOwnProperty","initials","Object","keys","pop","submitHi","e","preventDefault","value","slice","toUpperCase","unshift","last","one","two","three","child","set","low","off","min","apply","reset","step","lastPiece","isNextRowSet","fullRows","checkForFullRow","clearRows","module","exports","boardAsArray","over","column","abs","row","getBoard","rowFull","j","rows","dim_x","color","index","h","splice","k","l","block","Piece","colorConstants","call","RED","Surrogate","PIECE_SIZE","MOVES","LEFT","RIGHT","DOWN","ROTATE_LEFT","move","direction","checkColRight","checkColLeft","columnLeft","ceil","isSpaceTaken","columnRight","rotateLeft","rotateRight","BLUE","GREEN","YELLOW","PURPLE","ORANGE","PINK","originBlock","originalLocation","rotation","bindKeyHandlers","key","replay","lastTime","list","scoreLi","requestAnimationFrame","animate","bind","time","timeDelta"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 25671a2a1baee4989c9a\n **/","const Game     = require('./game');\nconst GameView = require('./game_view');\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const canvas  = document.getElementById('canvas');\n  canvas.width  = Game.DIM_X;\n  canvas.height = Game.DIM_Y;\n  const ctx     = canvas.getContext(\"2d\");\n  const game    = new Game();\n  new GameView(game, ctx).start();\n});\n\nlet mute  = document.getElementById(\"volume\");\nlet audio = document.getElementById(\"theme\");\n\nmute.addEventListener('click', function () {\n  if (!audio.paused) {\n    mute.innerHTML = '<span class=\"fa-stack\"><i class=\"fa fa-music fa-stack-1x\"></i><i class=\"fa fa-ban fa-stack-1x\"></i></span> Unmute</span>'\n    mute.className = 'muted'\n    audio.pause();\n  } else {\n    mute.innerHTML = '<i class=\"fa fa-music\"></i> Mute';\n    mute.className = '';\n    audio.play();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/tetris.js\n **/","const Board  = require('./board');\nconst Square = require('./pieces/square');\nconst Line   = require('./pieces/line');\nconst LeftL  = require('./pieces/left_l');\nconst RightL = require('./pieces/right_l');\nconst LeftZ  = require('./pieces/left_z');\nconst RightZ = require('./pieces/right_z');\nconst Tee    = require('./pieces/t');\n\nconst NUM_PIECES = 7\n\nconst Game = function () {\n  this.board       = new Board();\n  this.pieces      = [];\n  this.score       = 0;\n  this.paused      = false;\n  this.nextPiece   = [];\n  this.score       = 0;\n  this.menu        = 'main';\n  this.setInitials = false;\n  this.allScores   = [];\n};\n\nGame.BG_COLOR         = '#FAFAFA';\nGame.DIM_X            = 300;\nGame.DIM_Y            = 600;\nGame.FALL_RATE        = 2;\nGame.OriginalFallRate = 2;\n\nGame.prototype.togglePause = function () {\n  this.paused = !this.paused;\n};\n\nGame.prototype.renderPausedMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('PAUSED', 95, 260);\n  ctx.fillText('PAUSED', 95, 260);\n};\n\nGame.prototype.renderGameOverMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('Game Over', 67, 250);\n  ctx.fillText('Game Over', 67, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"r\" to replay.', 73, 275);\n};\n\nGame.prototype.renderMainMenu = function (ctx) {\n  if (this.menu !== \"main\") return;\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 150);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('TETIS.JS', 70, 250);\n  ctx.fillText('TETIS.JS', 70, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"s\" to start.', 83, 275);\n  ctx.fillText('wasd - direction', 90, 300);\n  ctx.fillText('q/e - rotate left/right', 58, 325);\n};\n\nGame.prototype.removeMainMenu = function () {\n  this.menu = 'play';\n  document.getElementById('next-image').style.opacity = 1;\n};\n\nGame.prototype.randomPiece = function () {\n  const choose = Math.floor(Math.random() * NUM_PIECES + 1);\n  switch (choose) {\n    case 1:\n      return new Square(this.board);\n      break;\n    case 2:\n      return new Line(this.board);\n      break;\n    case 3:\n      return new LeftL(this.board);\n      break;\n    case 4:\n      return new RightL(this.board);\n      break;\n    case 5:\n      return new LeftZ(this.board);\n      break;\n    case 6:\n      return new RightZ(this.board);\n      break;\n    case 7:\n      return new Tee(this.board);\n      break;\n  }\n};\n\nGame.prototype.addPiece = function () {\n  let piece = this.nextPiece.shift();\n  this.nextPiece.push(this.randomPiece());\n  if (this.menu === 'main') {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  } else {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  }\n  this.pieces.push(piece);\n};\n\nGame.prototype.setNextPiece = function () {\n  this.nextPiece.push(this.randomPiece());\n};\n\nGame.prototype.hideNextPiece = function () {\n  document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`\n};\n\nGame.prototype.draw = function (ctx) {\n  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  if (this.menu === 'main') {\n    this.renderMainMenu(ctx);\n  }\n\n  this.pieces.forEach( piece => {\n    piece.draw(ctx);\n  });\n\n  if (this.paused) {\n    this.renderPausedMenu(ctx);\n  }\n\n  if (this.menu === 'over') {\n    this.hideNextPiece();\n    this.renderGameOverMenu(ctx);\n  }\n};\n\nGame.prototype.setScore = function () {\n  let scoreTag       = document.getElementById('score');\n  scoreTag.innerHTML = this.score;\n  this.increaseFallRate();\n};\n\nGame.prototype.increaseFallRate = function () {\n  if (this.score % 2500 === 0 && this.score !== 0) {\n    Game.FALL_RATE += 1;\n    Game.OriginalFallRate += 1;\n  }\n}\n\nGame.prototype.movePiece = function (delta) {\n  const piece = this.pieces[this.pieces.length - 1];\n  const board = this.board;\n  for (let i = 0; i < piece.location.length; i++) {\n    if (this.paused || this.menu === 'main' || this.menu === 'over') {\n      Game.FALL_RATE = 0;\n    } else {\n      Game.FALL_RATE = Game.OriginalFallRate;\n    };\n    piece.location[i][1] += Game.FALL_RATE;\n  }\n};\n\nGame.prototype.checkForGameOver = function () {\n\n  if (this.board.isOver() && this.score >= this.lowestHighScore() && !this.setInitials) {\n    this.menu = 'over';\n    if (this.allScores.length === 0) {\n      this.setAllScores();\n      this.renderHiScoreMenu();\n    }\n  } else if (this.board.isOver()) {\n    this.menu = 'over';\n  }\n};\n\nGame.prototype.setAllScores = function () {\n  const menu = document.getElementById(\"enter-score\");\n  const dbRefObject = firebase.database().ref();\n  const thisGame = this;\n  dbRefObject.on(\"value\", function(snapshot) {\n    if (snapshot.val()) {\n      let scores = snapshot.val().scores;\n      for (let score in scores) {\n        if (scores.hasOwnProperty(score)) {\n          let initials = Object.keys(scores[score])[0];\n          thisGame.allScores.push([initials, scores[score][initials]]);\n        }\n      }\n    }\n  });\n\n  thisGame.allScores.pop();\n  menu.className = \"\";\n};\n\nGame.prototype.renderHiScoreMenu = function () {\n  const menu = document.getElementById(\"enter-score\");\n  const submitHi = document.getElementById(\"submit\");\n  const thisGame = this;\n  submitHi.addEventListener('click', (e) => {\n    e.preventDefault();\n    let initials = document.getElementById(\"initials\").value;\n    if (initials.length > 3) {\n      initials = initials.slice(0, 3).toUpperCase();\n    }\n    if (thisGame.score >= thisGame.allScores[0][1]) {\n      thisGame.allScores.unshift([initials, thisGame.score]);\n    } else if (thisGame.score < this.allScores[1][1]) {\n      thisGame.allScores.push([initials, thisGame.score]);\n    } else {\n      let last = thisGame.allScores.pop();\n      thisGame.allScores.push([initials, thisGame.score]);\n      thisGame.allScores.push(last);\n    }\n    const one = {};\n    const two = {};\n    const three = {};\n\n    one[thisGame.allScores[0][0]] = thisGame.allScores[0][1];\n    two[thisGame.allScores[1][0]] = thisGame.allScores[1][1];\n    three[thisGame.allScores[2][0]] = thisGame.allScores[2][1];\n    firebase.database().ref().child('scores').set({});\n    firebase.database().ref().child('scores').push(one);\n    firebase.database().ref().child('scores').push(two);\n    firebase.database().ref().child('scores').push(three);\n    menu.className = \"hide\";\n    thisGame.setInitials = true;\n    thisGame.menu = 'over';\n    thisGame.allScores = [];\n  });\n};\n\nGame.prototype.lowestHighScore = function () {\n  const dbRefObject = firebase.database().ref();\n  const allScores = [];\n\n  const low = dbRefObject.on(\"value\", function(snapshot) {\n    if (snapshot.val()) {\n      let scores = snapshot.val().scores;\n      for (let score in scores) {\n        if (scores.hasOwnProperty(score)) {\n          let initials = Object.keys(scores[score])[0];\n          allScores.push(scores[score][initials]);\n        }\n      }\n    }\n  });\n  dbRefObject.off(\"value\", low);\n  return Math.min.apply(Math, allScores);\n};\n\nGame.prototype.reset = function (ctx) {\n  this.menu             = 'replay';\n  this.pieces           = [];\n  Game.FALL_RATE        = 2;\n  Game.OriginalFallRate = 2;\n  this.score            = 0;\n  this.nextPiece        = [];\n  this.setInitials      = false;\n  this.setScore();\n  this.board.reset();\n};\n\nGame.prototype.step = function (delta, ctx) {\n  if (this.menu === 'replay') {\n    this.draw(ctx);\n    this.menu = 'play';\n  }\n  const lastPiece = this.pieces[this.pieces.length - 1];\n  if (this.pieces.length == 0) {\n    this.setNextPiece();\n    this.addPiece();\n  } else {\n    if (this.pieces.length > 0 && !this.board.isNextRowSet(lastPiece)) {\n      this.movePiece(delta);\n    } else {\n      this.checkForGameOver();\n      if (this.menu !== 'over') {\n        this.board.addPiece(lastPiece);\n        this.addPiece();\n      }\n      if (this.menu === 'over') {\n        this.movePiece(delta);\n      }\n      let fullRows = this.board.checkForFullRow();\n      if (Object.keys(fullRows).length > 0) {\n        this.score += Object.keys(fullRows).length * 100;\n        if (Object.keys(fullRows).length === 4) this.score += 400;\n        this.setScore();\n        this.board.clearRows(fullRows, ctx, Game.DIM_X, Game.BG_COLOR);\n      }\n    }\n  }\n};\n\nmodule.exports = Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game.js\n **/","let boardAsArray = [\n// 0   1   2   3   4   5   6   7   8    9\n  [[], [], [], [], [], [], [], [], [], []], // 0\n  [[], [], [], [], [], [], [], [], [], []], // 1\n  [[], [], [], [], [], [], [], [], [], []], // 2\n  [[], [], [], [], [], [], [], [], [], []], // 3\n  [[], [], [], [], [], [], [], [], [], []], // 4\n  [[], [], [], [], [], [], [], [], [], []], // 5\n  [[], [], [], [], [], [], [], [], [], []], // 6\n  [[], [], [], [], [], [], [], [], [], []], // 7\n  [[], [], [], [], [], [], [], [], [], []], // 8\n  [[], [], [], [], [], [], [], [], [], []], // 9\n  [[], [], [], [], [], [], [], [], [], []], // 10\n  [[], [], [], [], [], [], [], [], [], []], // 11\n  [[], [], [], [], [], [], [], [], [], []], // 12\n  [[], [], [], [], [], [], [], [], [], []], // 13\n  [[], [], [], [], [], [], [], [], [], []], // 14\n  [[], [], [], [], [], [], [], [], [], []], // 15\n  [[], [], [], [], [], [], [], [], [], []], // 16\n  [[], [], [], [], [], [], [], [], [], []], // 17\n  [[], [], [], [], [], [], [], [], [], []], // 18\n  [[], [], [], [], [], [], [], [], [], []], // 19\n  [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n];\n\n\nconst Board = function () {\n  this.over = false;\n}\n\nBoard.prototype.isOver = function () {\n  return this.over;\n};\n\nBoard.prototype.reset = function () {\n  this.over = false;\n  boardAsArray = [\n  // 0   1   2   3   4   5   6   7   8    9\n    [[], [], [], [], [], [], [], [], [], []], // 0\n    [[], [], [], [], [], [], [], [], [], []], // 1\n    [[], [], [], [], [], [], [], [], [], []], // 2\n    [[], [], [], [], [], [], [], [], [], []], // 3\n    [[], [], [], [], [], [], [], [], [], []], // 4\n    [[], [], [], [], [], [], [], [], [], []], // 5\n    [[], [], [], [], [], [], [], [], [], []], // 6\n    [[], [], [], [], [], [], [], [], [], []], // 7\n    [[], [], [], [], [], [], [], [], [], []], // 8\n    [[], [], [], [], [], [], [], [], [], []], // 9\n    [[], [], [], [], [], [], [], [], [], []], // 10\n    [[], [], [], [], [], [], [], [], [], []], // 11\n    [[], [], [], [], [], [], [], [], [], []], // 12\n    [[], [], [], [], [], [], [], [], [], []], // 13\n    [[], [], [], [], [], [], [], [], [], []], // 14\n    [[], [], [], [], [], [], [], [], [], []], // 15\n    [[], [], [], [], [], [], [], [], [], []], // 16\n    [[], [], [], [], [], [], [], [], [], []], // 17\n    [[], [], [], [], [], [], [], [], [], []], // 18\n    [[], [], [], [], [], [], [], [], [], []], // 19\n    [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n  ];\n};\n\nBoard.prototype.isNextRowSet = function (piece) {\n  for (let i = 0; i < piece.location.length; i++) {\n    let column = Math.abs(Math.floor(piece.location[i][0] / 30));\n    let row    = Math.floor(piece.location[i][1] / 30) + 1;\n    column > 9 ? column = 9 : column;\n    row < 0 ? row = 0 : row;\n    if (boardAsArray[row][column].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nBoard.prototype.checkForGameOver = function () {\n  return false;\n};\n\nBoard.prototype.getBoard = function () {\n  return boardAsArray;\n};\n\nBoard.prototype.checkForFullRow = function () {\n  const fullRows = {};\n\n  for (let i = 0; i < boardAsArray.length - 1; i++) {\n    let rowFull = true;\n    for (let j = 0; j < boardAsArray[0].length; j++) {\n      if (boardAsArray[i][j].length === 0) {\n        rowFull = false;\n      }\n    }\n    if (rowFull) {\n      fullRows[i] = boardAsArray[i];\n    }\n  }\n\n  return fullRows;\n};\n\nBoard.prototype.clearRows = function (rows, ctx, dim_x, color) {\n  for (let row in rows) {\n    if (rows.hasOwnProperty(row)) {\n      for (let i = 0; i < 10; i++) {\n        let index;\n        let piece = rows[row][i][0];\n        for (let h = 0; h < piece.location.length; h++) {\n          if (piece.location[h][0] === i * 30 && piece.location[h][1] === row * 30) {\n            index = h;\n          }\n        }\n        piece.location.splice(index, 1);\n        rows[row][i] = [];\n      }\n\n      ctx.beginPath();\n      ctx.rect(0, row * 30, dim_x, 30);\n      ctx.fillStyle = color;\n      ctx.fill();\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = color;\n      ctx.stroke();\n\n      for (let j = row - 1; j >= 0; j--) {\n        for (let k = 0; k < 10; k++) {\n          if (boardAsArray[j][k].length > 0) {\n            let piece = boardAsArray[j][k][0];\n            boardAsArray[j][k] = [];\n            for (let l = 0; l < piece.location.length; l++) {\n              if (piece.location[l][0] === k * 30 && piece.location[l][1] === j * 30) {\n                piece.location[l][1] += 30;\n                boardAsArray[j + 1][k] = [piece];\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nBoard.prototype.addPiece = function (piece) {\n  for (let i = 3; i >= 0; i--) {\n    if (piece.location[i][1] < 0) {\n      piece.location.splice(i, 1);\n      this.over = true;\n    }\n  }\n\n  piece.location.forEach( block => {\n    const column = Math.floor(block[0] / 30);\n    const row    = Math.floor(block[1] / 30);\n    block[0]     = column * 30;\n    block[1]     = row * 30;\n    boardAsArray[row][column] = [piece];\n  });\n};\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/board.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Square = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.RED;\n  this.location = [\n    [150, -60],\n    [120, -60],\n    [150, -90],\n    [120, -90]\n  ];\n  this.name = \"Square\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nSquare.prototype = new Surrogate();\n\nmodule.exports = Square;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/square.js\n **/","const PIECE_SIZE = 30;\nconst MOVES = {\n  LEFT        : \"left\",\n  RIGHT       : \"right\",\n  DOWN        : \"down\",\n  ROTATE_LEFT : \"rotate left\"\n}\nconst Piece = function (board) {\n  this.board    = board.getBoard()\n  this.set      = false;\n  this.color    = null;\n  this.location = [];\n};\nPiece.prototype.move = function(direction) {\n  switch (direction) {\n    case MOVES.RIGHT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] >= 270 || this.checkColRight()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] <= 270) {\n          this.location[i][0] += 30;\n        }\n      }\n    break;\n    case MOVES.LEFT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] <= 0 || this.checkColLeft()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] >= 0) {\n          this.location[i][0] -= 30;\n        }\n      }\n      break;\n      case MOVES.DOWN:\n        for (let j = 0; j < this.location.length; j++) {\n          if (this.location[j][1] <= 0) {\n            return;\n          }\n        }\n        for (let i = 0; i < this.location.length; i++) {\n          this.location[i][1] += 10;\n        }\n        break;\n  }\n},\nPiece.prototype.checkColLeft = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnLeft  = Math.ceil(this.location[i][0] / 30) - 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnLeft < 0 ? columnLeft = 0 : columnLeft;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnLeft].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.isSpaceTaken = function (block) {\n  let column = Math.abs(Math.floor(block[0] / 30));\n  let row    = Math.floor(block[1] / 30);\n  column > 9 ? column = 9 : column;\n  row < 0 ? row = 0 : row;\n\n  if (this.board[row][column].length > 0 || block[0] >= 300 || block[0] < 0) {\n    return true;\n  }\n\n  return false;\n};\nPiece.prototype.checkColRight = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnRight = Math.ceil(this.location[i][0] / 30) + 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnRight > 9 ? columnRight = 9 : columnRight;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnRight].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.draw = function (ctx) {\n  this.location.forEach( block => {\n    ctx.beginPath();\n    ctx.rect(block[0], block[1], PIECE_SIZE, PIECE_SIZE );\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = 'black';\n    ctx.stroke();\n  });\n};\nPiece.prototype.rotateLeft = function (paused) {\n\n};\nPiece.prototype.rotateRight = function(paused) {\n\n};\n\nmodule.exports = Piece;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/piece.js\n **/","const colorConstants = {\n  RED    : '#F00',\n  BLUE   : '#00F',\n  GREEN  : '#0F0',\n  YELLOW : '#FFFF00',\n  PURPLE : '#BF5FFF',\n  ORANGE : '#FFA500',\n  PINK   : '#FF69B4'\n}\n\nmodule.exports = colorConstants;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/color_constants.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Line = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.BLUE;\n  this.location = [\n    [120, -150],\n    [120, -120],\n    [120, -90],\n    [120, -60]\n  ];\n  this.name = \"Line\"\n}\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLine.prototype = new Surrogate();\nLine.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] -= rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLine.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] += rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\n\nmodule.exports = Line;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/line.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.GREEN;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"LeftL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftL.prototype = new Surrogate();\nLeftL.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftL.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PURPLE;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"RightL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightL.prototype = new Surrogate();\nRightL.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightL.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.YELLOW;\n  this.location = [\n    [90, -90],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"LeftZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftZ.prototype = new Surrogate();\nLeftZ.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftZ.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.ORANGE;\n  this.location = [\n    [150, -90],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"RightZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightZ.prototype = new Surrogate();\nRightZ.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightZ.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Tee = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PINK;\n  this.location = [\n    [120, -90],\n    [120, -60],\n    [150, -60],\n    [90, -60]\n  ];\n  this.name = \"Tee\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nTee.prototype = new Surrogate();\nTee.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nTee.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = Tee;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/t.js\n **/","const GameView = function (game, ctx) {\n  this.ctx = ctx;\n  this.game = game;\n};\n\nGameView.MOVES = {\n  'a' : 'left',\n  's' : 'down',\n  'd' : 'right',\n};\n\n\nGameView.prototype.bindKeyHandlers = function () {\n  if (this.game.menu === 'main') {\n    key('s', () => { this.game.removeMainMenu(); });\n  }\n\n  Object.keys(GameView.MOVES).forEach( k => {\n    let direction = GameView.MOVES[k];\n    key(k, () => { this.game.pieces[this.game.pieces.length - 1].move(direction); });\n  });\n  key('r', () => { this.replay(); });\n  key('p', () => { this.game.togglePause(); });\n  key('q', () => { this.game.pieces[this.game.pieces.length - 1].rotateLeft(this.game.paused); });\n  key('e', () => { this.game.pieces[this.game.pieces.length - 1].rotateRight(this.game.paused); });\n};\n\nGameView.prototype.replay = function () {\n  if (this.game.menu !== 'over') return;\n  this.game.reset(this.ctx);\n};\n\nGameView.prototype.start = function () {\n  this.bindKeyHandlers();\n  this.lastTime = 0;\n  const dbRefObject = firebase.database().ref();\n\n  dbRefObject.on(\"value\", function(snapshot) {\n    let list = document.getElementById(\"hi-list\");\n    let scoreLi = \"\";\n    if (snapshot.val()) {\n      let scores = snapshot.val().scores;\n      for (let score in scores) {\n        if (scores.hasOwnProperty(score)) {\n          let initials = Object.keys(scores[score])[0];\n          scoreLi += \"<li>\";\n          scoreLi += `${initials}:${scores[score][initials]}`;\n          scoreLi += \"</li>\";\n        }\n      }\n    }\n    list.innerHTML = scoreLi;\n  });\n\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.animate = function(time) {\n  const timeDelta = time - this.lastTime;\n\n  this.game.step(timeDelta, this.ctx);\n  this.game.draw(this.ctx);\n  this.lastTime = time\n\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nmodule.exports = GameView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game_view.js\n **/"],"sourceRoot":""}