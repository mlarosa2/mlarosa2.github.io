{"version":3,"sources":["webpack:///webpack/bootstrap 0a2c1e7354036948a693","webpack:///./tetris_assets/js/tetris.js","webpack:///./tetris_assets/js/game.js","webpack:///./tetris_assets/js/board.js","webpack:///./tetris_assets/js/pieces/square.js","webpack:///./tetris_assets/js/pieces/piece.js","webpack:///./tetris_assets/js/pieces/color_constants.js","webpack:///./tetris_assets/js/pieces/line.js","webpack:///./tetris_assets/js/pieces/left_l.js","webpack:///./tetris_assets/js/pieces/right_l.js","webpack:///./tetris_assets/js/pieces/left_z.js","webpack:///./tetris_assets/js/pieces/right_z.js","webpack:///./tetris_assets/js/pieces/t.js","webpack:///./tetris_assets/js/game_view.js"],"names":["Game","require","GameView","document","addEventListener","canvas","getElementById","width","DIM_X","height","DIM_Y","ctx","getContext","game","start","mute","audio","paused","innerHTML","className","pause","play","Board","Square","Line","LeftL","RightL","LeftZ","RightZ","Tee","NUM_PIECES","board","pieces","score","nextPiece","menu","BG_COLOR","FALL_RATE","OriginalFallRate","prototype","togglePause","renderPausedMenu","beginPath","rect","fillStyle","fill","lineWidth","strokeStyle","stroke","font","strokeText","fillText","renderGameOverMenu","renderMainMenu","removeMainMenu","style","opacity","randomPiece","choose","Math","floor","random","addPiece","piece","shift","push","name","setNextPiece","hideNextPiece","draw","clearRect","fillRect","forEach","setScore","scoreTag","increaseFallRate","movePiece","delta","length","i","location","checkForGameOver","isOver","lowestHighScore","renderHiScoreModal","dbRefObject","firebase","database","ref","allScores","on","snapshot","scores","val","hasOwnProperty","initials","Object","keys","pop","submitHi","e","preventDefault","value","slice","toUpperCase","unshift","last","nameOne","nameTwo","nameThree","child","set","min","apply","reset","step","lastPiece","isNextRowSet","fullRows","checkForFullRow","clearRows","module","exports","boardAsArray","over","column","abs","row","getBoard","rowFull","j","rows","dim_x","color","index","h","splice","k","l","block","Piece","colorConstants","call","RED","Surrogate","PIECE_SIZE","MOVES","LEFT","RIGHT","DOWN","ROTATE_LEFT","move","direction","checkColRight","checkColLeft","columnLeft","ceil","isSpaceTaken","columnRight","rotateLeft","rotateRight","BLUE","GREEN","YELLOW","PURPLE","ORANGE","PINK","originBlock","originalLocation","rotation","bindKeyHandlers","key","replay","lastTime","list","scoreLi","requestAnimationFrame","animate","bind","time","timeDelta"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0a2c1e7354036948a693\n **/","const Game     = require('./game');\nconst GameView = require('./game_view');\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const canvas  = document.getElementById('canvas');\n  canvas.width  = Game.DIM_X;\n  canvas.height = Game.DIM_Y;\n  const ctx     = canvas.getContext(\"2d\");\n  const game    = new Game();\n  new GameView(game, ctx).start();\n});\n\nlet mute  = document.getElementById(\"volume\");\nlet audio = document.getElementById(\"theme\");\n\nmute.addEventListener('click', function () {\n  if (!audio.paused) {\n    mute.innerHTML = '<span class=\"fa-stack\"><i class=\"fa fa-music fa-stack-1x\"></i><i class=\"fa fa-ban fa-stack-1x\"></i></span> Unmute</span>'\n    mute.className = 'muted'\n    audio.pause();\n  } else {\n    mute.innerHTML = '<i class=\"fa fa-music\"></i> Mute';\n    mute.className = '';\n    audio.play();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/tetris.js\n **/","const Board  = require('./board');\nconst Square = require('./pieces/square');\nconst Line   = require('./pieces/line');\nconst LeftL  = require('./pieces/left_l');\nconst RightL = require('./pieces/right_l');\nconst LeftZ  = require('./pieces/left_z');\nconst RightZ = require('./pieces/right_z');\nconst Tee    = require('./pieces/t');\n\nconst NUM_PIECES = 7\n\nconst Game = function () {\n  this.board     = new Board();\n  this.pieces    = [];\n  this.score     = 0;\n  this.paused    = false;\n  this.nextPiece = [];\n  this.score     = 0;\n  this.menu      = 'main';\n};\n\nGame.BG_COLOR         = '#FAFAFA';\nGame.DIM_X            = 300;\nGame.DIM_Y            = 600;\nGame.FALL_RATE        = 2;\nGame.OriginalFallRate = 2;\n\nGame.prototype.togglePause = function () {\n  this.paused = !this.paused;\n};\n\nGame.prototype.renderPausedMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('PAUSED', 95, 260);\n  ctx.fillText('PAUSED', 95, 260);\n};\n\nGame.prototype.renderGameOverMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('Game Over', 67, 250);\n  ctx.fillText('Game Over', 67, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"r\" to replay.', 73, 275);\n};\n\nGame.prototype.renderMainMenu = function (ctx) {\n  if (this.menu !== \"main\") return;\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 150);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('TETIS.JS', 70, 250);\n  ctx.fillText('TETIS.JS', 70, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"s\" to start.', 83, 275);\n  ctx.fillText('wasd - direction', 90, 300);\n  ctx.fillText('q/e - rotate left/right', 58, 325);\n};\n\nGame.prototype.removeMainMenu = function () {\n  this.menu = 'play';\n  document.getElementById('next-image').style.opacity = 1;\n};\n\nGame.prototype.randomPiece = function () {\n  const choose = Math.floor(Math.random() * NUM_PIECES + 1);\n  switch (choose) {\n    case 1:\n      return new Square(this.board);\n      break;\n    case 2:\n      return new Line(this.board);\n      break;\n    case 3:\n      return new LeftL(this.board);\n      break;\n    case 4:\n      return new RightL(this.board);\n      break;\n    case 5:\n      return new LeftZ(this.board);\n      break;\n    case 6:\n      return new RightZ(this.board);\n      break;\n    case 7:\n      return new Tee(this.board);\n      break;\n  }\n};\n\nGame.prototype.addPiece = function () {\n  let piece = this.nextPiece.shift();\n  this.nextPiece.push(this.randomPiece());\n  if (this.menu === 'main') {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  } else {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  }\n  this.pieces.push(piece);\n};\n\nGame.prototype.setNextPiece = function () {\n  this.nextPiece.push(this.randomPiece());\n};\n\nGame.prototype.hideNextPiece = function () {\n  document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`\n};\n\nGame.prototype.draw = function (ctx) {\n  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  if (this.menu === 'main') {\n    this.renderMainMenu(ctx);\n  }\n\n  this.pieces.forEach( piece => {\n    piece.draw(ctx);\n  });\n\n  if (this.paused) {\n    this.renderPausedMenu(ctx);\n  }\n\n  if (this.menu === 'over') {\n    this.hideNextPiece();\n    this.renderGameOverMenu(ctx);\n  }\n};\n\nGame.prototype.setScore = function () {\n  let scoreTag       = document.getElementById('score');\n  scoreTag.innerHTML = this.score;\n  this.increaseFallRate();\n};\n\nGame.prototype.increaseFallRate = function () {\n  if (this.score % 2500 === 0 && this.score !== 0) {\n    Game.FALL_RATE += 1;\n    Game.OriginalFallRate += 1;\n  }\n}\n\nGame.prototype.movePiece = function (delta) {\n  const piece = this.pieces[this.pieces.length - 1];\n  const board = this.board;\n  for (let i = 0; i < piece.location.length; i++) {\n    if (this.paused || this.menu === 'main' || this.menu === 'over') {\n      Game.FALL_RATE = 0;\n    } else {\n      Game.FALL_RATE = Game.OriginalFallRate;\n    };\n    piece.location[i][1] += Game.FALL_RATE;\n  }\n};\n\nGame.prototype.checkForGameOver = function () {\n  if (this.board.isOver() && this.score >= this.lowestHighScore()) {\n    this.menu = 'hi-score';\n    this.renderHiScoreModal();\n  } else if (this.board.isOver()) {\n    this.menu = 'over';\n  }\n};\n\nGame.prototype.renderHiScoreModal = function () {\n  const dbRefObject = firebase.database().ref();\n  const allScores = [];\n\n  dbRefObject.on(\"value\", function(snapshot) {\n    let scores = snapshot.val().scores;\n    for (let score in scores) {\n      if (scores.hasOwnProperty(score)) {\n        let initials = Object.keys(scores[score])[0];\n        allScores.push([initials, scores[score][initials]]);\n      }\n    }\n  });\n\n  allScores.pop();\n\n  let menu = document.getElementById(\"enter-score\");\n  let submitHi = document.getElementById(\"submit\");\n  menu.className = \"\";\n  submitHi.addEventListener('click', (e) => {\n    e.preventDefault();\n    let initials = document.getElementById(\"initials\");\n    if (initials.value.length > 3) {\n      initials = initials.slice(0, 3).toUpperCase();\n    }\n    if (this.score >= allScores[0][1]) {\n      allScores.unshift([initials, this.score]);\n    } else if (this.score < allScores[1][1]) {\n      allScores.push([initials, this.score]);\n    } else {\n      let last = allScores.pop();\n      allScores.push([initials, this.score]);\n      allScores.push(last);\n    }\n    let nameOne = allScores[0][0];\n    let nameTwo = allScores[1][0];\n    let nameThree = allScores[2][0];\n\n    firebase.database().ref().child('scores').set();\n    firebase.database().ref().child('scores').push({ nameOne : allScores[0][1] });\n    firebase.database().ref().child('scores').push({ nameTwo : allScores[1][1]});\n    firebase.database().ref().child('scores').push({ nameThree : allScores[2][1]});\n    submitHi.className = \"hide\";\n\n    this.board = 'over';\n  });\n};\n\nGame.prototype.lowestHighScore = function () {\n  const dbRefObject = firebase.database().ref();\n  const allScores = [];\n\n  dbRefObject.on(\"value\", function(snapshot) {\n    let scores = snapshot.val().scores;\n    for (let score in scores) {\n      if (scores.hasOwnProperty(score)) {\n        let initials = Object.keys(scores[score])[0];\n        allScores.push(scores[score][initials]);\n      }\n    }\n  });\n\n  return Math.min.apply(Math, allScores);\n};\n\nGame.prototype.reset = function (ctx) {\n  this.menu             = 'replay';\n  this.pieces           = [];\n  Game.FALL_RATE        = 2;\n  Game.OriginalFallRate = 2;\n  this.score            = 0;\n  this.nextPiece        = [];\n  this.setScore();\n  this.board.reset();\n};\n\nGame.prototype.step = function (delta, ctx) {\n  if (this.menu === 'replay') {\n    this.draw(ctx);\n    this.menu = 'play';\n  }\n  const lastPiece = this.pieces[this.pieces.length - 1];\n  if (this.pieces.length == 0) {\n    this.setNextPiece();\n    this.addPiece();\n  } else {\n    if (this.pieces.length > 0 && !this.board.isNextRowSet(lastPiece)) {\n      this.movePiece(delta);\n    } else {\n      this.checkForGameOver();\n      if (this.menu !== 'over') {\n        this.board.addPiece(lastPiece);\n        this.addPiece();\n      }\n      if (this.menu === 'over') {\n        this.movePiece(delta);\n      }\n      let fullRows = this.board.checkForFullRow();\n      if (Object.keys(fullRows).length > 0) {\n        this.score += Object.keys(fullRows).length * 100;\n        if (Object.keys(fullRows).length === 4) this.score += 400;\n        this.setScore();\n        this.board.clearRows(fullRows, ctx, Game.DIM_X, Game.BG_COLOR);\n      }\n    }\n  }\n};\n\n\nmodule.exports = Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game.js\n **/","let boardAsArray = [\n// 0   1   2   3   4   5   6   7   8    9\n  [[], [], [], [], [], [], [], [], [], []], // 0\n  [[], [], [], [], [], [], [], [], [], []], // 1\n  [[], [], [], [], [], [], [], [], [], []], // 2\n  [[], [], [], [], [], [], [], [], [], []], // 3\n  [[], [], [], [], [], [], [], [], [], []], // 4\n  [[], [], [], [], [], [], [], [], [], []], // 5\n  [[], [], [], [], [], [], [], [], [], []], // 6\n  [[], [], [], [], [], [], [], [], [], []], // 7\n  [[], [], [], [], [], [], [], [], [], []], // 8\n  [[], [], [], [], [], [], [], [], [], []], // 9\n  [[], [], [], [], [], [], [], [], [], []], // 10\n  [[], [], [], [], [], [], [], [], [], []], // 11\n  [[], [], [], [], [], [], [], [], [], []], // 12\n  [[], [], [], [], [], [], [], [], [], []], // 13\n  [[], [], [], [], [], [], [], [], [], []], // 14\n  [[], [], [], [], [], [], [], [], [], []], // 15\n  [[], [], [], [], [], [], [], [], [], []], // 16\n  [[], [], [], [], [], [], [], [], [], []], // 17\n  [[], [], [], [], [], [], [], [], [], []], // 18\n  [[], [], [], [], [], [], [], [], [], []], // 19\n  [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n];\n\n\nconst Board = function () {\n  this.over = false;\n}\n\nBoard.prototype.isOver = function () {\n  return this.over;\n};\n\nBoard.prototype.reset = function () {\n  this.over = false;\n  boardAsArray = [\n  // 0   1   2   3   4   5   6   7   8    9\n    [[], [], [], [], [], [], [], [], [], []], // 0\n    [[], [], [], [], [], [], [], [], [], []], // 1\n    [[], [], [], [], [], [], [], [], [], []], // 2\n    [[], [], [], [], [], [], [], [], [], []], // 3\n    [[], [], [], [], [], [], [], [], [], []], // 4\n    [[], [], [], [], [], [], [], [], [], []], // 5\n    [[], [], [], [], [], [], [], [], [], []], // 6\n    [[], [], [], [], [], [], [], [], [], []], // 7\n    [[], [], [], [], [], [], [], [], [], []], // 8\n    [[], [], [], [], [], [], [], [], [], []], // 9\n    [[], [], [], [], [], [], [], [], [], []], // 10\n    [[], [], [], [], [], [], [], [], [], []], // 11\n    [[], [], [], [], [], [], [], [], [], []], // 12\n    [[], [], [], [], [], [], [], [], [], []], // 13\n    [[], [], [], [], [], [], [], [], [], []], // 14\n    [[], [], [], [], [], [], [], [], [], []], // 15\n    [[], [], [], [], [], [], [], [], [], []], // 16\n    [[], [], [], [], [], [], [], [], [], []], // 17\n    [[], [], [], [], [], [], [], [], [], []], // 18\n    [[], [], [], [], [], [], [], [], [], []], // 19\n    [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n  ];\n};\n\nBoard.prototype.isNextRowSet = function (piece) {\n  for (let i = 0; i < piece.location.length; i++) {\n    let column = Math.abs(Math.floor(piece.location[i][0] / 30));\n    let row    = Math.floor(piece.location[i][1] / 30) + 1;\n    column > 9 ? column = 9 : column;\n    row < 0 ? row = 0 : row;\n    if (boardAsArray[row][column].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nBoard.prototype.checkForGameOver = function () {\n  return false;\n};\n\nBoard.prototype.getBoard = function () {\n  return boardAsArray;\n};\n\nBoard.prototype.checkForFullRow = function () {\n  const fullRows = {};\n\n  for (let i = 0; i < boardAsArray.length - 1; i++) {\n    let rowFull = true;\n    for (let j = 0; j < boardAsArray[0].length; j++) {\n      if (boardAsArray[i][j].length === 0) {\n        rowFull = false;\n      }\n    }\n    if (rowFull) {\n      fullRows[i] = boardAsArray[i];\n    }\n  }\n\n  return fullRows;\n};\n\nBoard.prototype.clearRows = function (rows, ctx, dim_x, color) {\n  for (let row in rows) {\n    if (rows.hasOwnProperty(row)) {\n      for (let i = 0; i < 10; i++) {\n        let index;\n        let piece = rows[row][i][0];\n        for (let h = 0; h < piece.location.length; h++) {\n          if (piece.location[h][0] === i * 30 && piece.location[h][1] === row * 30) {\n            index = h;\n          }\n        }\n        piece.location.splice(index, 1);\n        rows[row][i] = [];\n      }\n\n      ctx.beginPath();\n      ctx.rect(0, row * 30, dim_x, 30);\n      ctx.fillStyle = color;\n      ctx.fill();\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = color;\n      ctx.stroke();\n\n      for (let j = row - 1; j >= 0; j--) {\n        for (let k = 0; k < 10; k++) {\n          if (boardAsArray[j][k].length > 0) {\n            let piece = boardAsArray[j][k][0];\n            boardAsArray[j][k] = [];\n            for (let l = 0; l < piece.location.length; l++) {\n              if (piece.location[l][0] === k * 30 && piece.location[l][1] === j * 30) {\n                piece.location[l][1] += 30;\n                boardAsArray[j + 1][k] = [piece];\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nBoard.prototype.addPiece = function (piece) {\n  for (let i = 3; i >= 0; i--) {\n    if (piece.location[i][1] < 0) {\n      piece.location.splice(i, 1);\n      this.over = true;\n    }\n  }\n\n  piece.location.forEach( block => {\n    const column = Math.floor(block[0] / 30);\n    const row    = Math.floor(block[1] / 30);\n    block[0]     = column * 30;\n    block[1]     = row * 30;\n    boardAsArray[row][column] = [piece];\n  });\n};\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/board.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Square = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.RED;\n  this.location = [\n    [150, -60],\n    [120, -60],\n    [150, -90],\n    [120, -90]\n  ];\n  this.name = \"Square\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nSquare.prototype = new Surrogate();\n\nmodule.exports = Square;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/square.js\n **/","const PIECE_SIZE = 30;\nconst MOVES = {\n  LEFT        : \"left\",\n  RIGHT       : \"right\",\n  DOWN        : \"down\",\n  ROTATE_LEFT : \"rotate left\"\n}\nconst Piece = function (board) {\n  this.board    = board.getBoard()\n  this.set      = false;\n  this.color    = null;\n  this.location = [];\n};\nPiece.prototype.move = function(direction) {\n  switch (direction) {\n    case MOVES.RIGHT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] >= 270 || this.checkColRight()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] <= 270) {\n          this.location[i][0] += 30;\n        }\n      }\n    break;\n    case MOVES.LEFT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] <= 0 || this.checkColLeft()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] >= 0) {\n          this.location[i][0] -= 30;\n        }\n      }\n      break;\n      case MOVES.DOWN:\n        for (let j = 0; j < this.location.length; j++) {\n          if (this.location[j][1] <= 0) {\n            return;\n          }\n        }\n        for (let i = 0; i < this.location.length; i++) {\n          this.location[i][1] += 10;\n        }\n        break;\n  }\n},\nPiece.prototype.checkColLeft = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnLeft  = Math.ceil(this.location[i][0] / 30) - 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnLeft < 0 ? columnLeft = 0 : columnLeft;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnLeft].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.isSpaceTaken = function (block) {\n  let column = Math.abs(Math.floor(block[0] / 30));\n  let row    = Math.floor(block[1] / 30);\n  column > 9 ? column = 9 : column;\n  row < 0 ? row = 0 : row;\n\n  if (this.board[row][column].length > 0 || block[0] >= 300 || block[0] < 0) {\n    return true;\n  }\n\n  return false;\n};\nPiece.prototype.checkColRight = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnRight = Math.ceil(this.location[i][0] / 30) + 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnRight > 9 ? columnRight = 9 : columnRight;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnRight].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.draw = function (ctx) {\n  this.location.forEach( block => {\n    ctx.beginPath();\n    ctx.rect(block[0], block[1], PIECE_SIZE, PIECE_SIZE );\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = 'black';\n    ctx.stroke();\n  });\n};\nPiece.prototype.rotateLeft = function (paused) {\n\n};\nPiece.prototype.rotateRight = function(paused) {\n\n};\n\nmodule.exports = Piece;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/piece.js\n **/","const colorConstants = {\n  RED    : '#F00',\n  BLUE   : '#00F',\n  GREEN  : '#0F0',\n  YELLOW : '#FFFF00',\n  PURPLE : '#BF5FFF',\n  ORANGE : '#FFA500',\n  PINK   : '#FF69B4'\n}\n\nmodule.exports = colorConstants;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/color_constants.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Line = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.BLUE;\n  this.location = [\n    [120, -150],\n    [120, -120],\n    [120, -90],\n    [120, -60]\n  ];\n  this.name = \"Line\"\n}\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLine.prototype = new Surrogate();\nLine.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] -= rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLine.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] += rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\n\nmodule.exports = Line;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/line.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.GREEN;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"LeftL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftL.prototype = new Surrogate();\nLeftL.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftL.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PURPLE;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"RightL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightL.prototype = new Surrogate();\nRightL.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightL.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.YELLOW;\n  this.location = [\n    [90, -90],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"LeftZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftZ.prototype = new Surrogate();\nLeftZ.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftZ.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.ORANGE;\n  this.location = [\n    [150, -90],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"RightZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightZ.prototype = new Surrogate();\nRightZ.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightZ.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Tee = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PINK;\n  this.location = [\n    [120, -90],\n    [120, -60],\n    [150, -60],\n    [90, -60]\n  ];\n  this.name = \"Tee\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nTee.prototype = new Surrogate();\nTee.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nTee.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = Tee;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/t.js\n **/","const GameView = function (game, ctx) {\n  this.ctx = ctx;\n  this.game = game;\n};\n\nGameView.MOVES = {\n  'a' : 'left',\n  's' : 'down',\n  'd' : 'right',\n};\n\n\nGameView.prototype.bindKeyHandlers = function () {\n  if (this.game.menu === 'main') {\n    key('s', () => { this.game.removeMainMenu(); });\n  }\n\n  Object.keys(GameView.MOVES).forEach( k => {\n    let direction = GameView.MOVES[k];\n    key(k, () => { this.game.pieces[this.game.pieces.length - 1].move(direction); });\n  });\n  key('r', () => { this.replay(); });\n  key('p', () => { this.game.togglePause(); });\n  key('q', () => { this.game.pieces[this.game.pieces.length - 1].rotateLeft(this.game.paused); });\n  key('e', () => { this.game.pieces[this.game.pieces.length - 1].rotateRight(this.game.paused); });\n};\n\nGameView.prototype.replay = function () {\n  if (this.game.menu !== 'over') return;\n  this.game.reset(this.ctx);\n};\n\nGameView.prototype.start = function () {\n  this.bindKeyHandlers();\n  this.lastTime = 0;\n  const dbRefObject = firebase.database().ref();\n\n  dbRefObject.on(\"value\", function(snapshot) {\n    let list = document.getElementById(\"hi-list\");\n    let scores = snapshot.val().scores;\n    let scoreLi = \"\";\n    for (let score in scores) {\n      if (scores.hasOwnProperty(score)) {\n        let initials = Object.keys(scores[score])[0];\n        scoreLi += \"<li>\";\n        scoreLi += `${initials}:${scores[score][initials]}`;\n        scoreLi += \"</li>\";\n      }\n    }\n\n    list.innerHTML = scoreLi;\n  });\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.animate = function(time) {\n  const timeDelta = time - this.lastTime;\n\n  this.game.step(timeDelta, this.ctx);\n  this.game.draw(this.ctx);\n  this.lastTime = time\n\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nmodule.exports = GameView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game_view.js\n **/"],"sourceRoot":""}