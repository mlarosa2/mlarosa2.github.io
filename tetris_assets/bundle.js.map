{"version":3,"sources":["webpack:///webpack/bootstrap 95abf4eae4e6f187c58f","webpack:///./tetris_assets/js/tetris.js","webpack:///./tetris_assets/js/game.js","webpack:///./tetris_assets/js/board.js","webpack:///./tetris_assets/js/pieces/square.js","webpack:///./tetris_assets/js/pieces/piece.js","webpack:///./tetris_assets/js/pieces/color_constants.js","webpack:///./tetris_assets/js/pieces/line.js","webpack:///./tetris_assets/js/pieces/left_l.js","webpack:///./tetris_assets/js/pieces/right_l.js","webpack:///./tetris_assets/js/pieces/left_z.js","webpack:///./tetris_assets/js/pieces/right_z.js","webpack:///./tetris_assets/js/pieces/t.js","webpack:///./tetris_assets/js/game_view.js"],"names":["Game","require","GameView","document","addEventListener","canvas","getElementById","width","DIM_X","height","DIM_Y","ctx","getContext","game","start","mute","audio","paused","innerHTML","className","pause","play","Board","Square","Line","LeftL","RightL","LeftZ","RightZ","Tee","NUM_PIECES","board","pieces","score","nextPiece","menu","BG_COLOR","FALL_RATE","OriginalFallRate","prototype","togglePause","renderPausedMenu","beginPath","rect","fillStyle","fill","lineWidth","strokeStyle","stroke","font","strokeText","fillText","renderGameOverMenu","renderMainMenu","removeMainMenu","style","opacity","randomPiece","choose","Math","floor","random","addPiece","piece","shift","push","name","setNextPiece","hideNextPiece","draw","clearRect","fillRect","forEach","setScore","scoreTag","increaseFallRate","firebase","database","ref","movePiece","delta","length","i","location","checkForGameOver","isOver","reset","step","lastPiece","isNextRowSet","fullRows","checkForFullRow","Object","keys","clearRows","module","exports","boardAsArray","over","column","abs","row","getBoard","rowFull","j","rows","dim_x","color","hasOwnProperty","index","h","splice","k","l","block","Piece","colorConstants","call","RED","Surrogate","PIECE_SIZE","MOVES","LEFT","RIGHT","DOWN","ROTATE_LEFT","set","move","direction","checkColRight","checkColLeft","columnLeft","ceil","isSpaceTaken","columnRight","rotateLeft","rotateRight","BLUE","GREEN","YELLOW","PURPLE","ORANGE","PINK","originBlock","originalLocation","rotation","bindKeyHandlers","key","replay","lastTime","highScore","data","requestAnimationFrame","animate","bind","time","timeDelta"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 95abf4eae4e6f187c58f\n **/","const Game     = require('./game');\nconst GameView = require('./game_view');\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const canvas  = document.getElementById('canvas');\n  canvas.width  = Game.DIM_X;\n  canvas.height = Game.DIM_Y;\n  const ctx     = canvas.getContext(\"2d\");\n  const game    = new Game();\n  new GameView(game, ctx).start();\n});\n\nlet mute  = document.getElementById(\"volume\");\nlet audio = document.getElementById(\"theme\");\n\nmute.addEventListener('click', function () {\n  if (!audio.paused) {\n    mute.innerHTML = '<span class=\"fa-stack\"><i class=\"fa fa-music fa-stack-1x\"></i><i class=\"fa fa-ban fa-stack-1x\"></i></span> Unmute</span>'\n    mute.className = 'muted'\n    audio.pause();\n  } else {\n    mute.innerHTML = '<i class=\"fa fa-music\"></i> Mute';\n    mute.className = '';\n    audio.play();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/tetris.js\n **/","const Board  = require('./board');\nconst Square = require('./pieces/square');\nconst Line   = require('./pieces/line');\nconst LeftL  = require('./pieces/left_l');\nconst RightL = require('./pieces/right_l');\nconst LeftZ  = require('./pieces/left_z');\nconst RightZ = require('./pieces/right_z');\nconst Tee    = require('./pieces/t');\n\nconst NUM_PIECES = 7\n\nconst Game = function () {\n  this.board     = new Board();\n  this.pieces    = [];\n  this.score     = 0;\n  this.paused    = false;\n  this.nextPiece = [];\n  this.score     = 0;\n  this.menu      = 'main';\n};\n\nGame.BG_COLOR         = '#FAFAFA';\nGame.DIM_X            = 300;\nGame.DIM_Y            = 600;\nGame.FALL_RATE        = 2;\nGame.OriginalFallRate = 2;\n\nGame.prototype.togglePause = function () {\n  this.paused = !this.paused;\n};\n\nGame.prototype.renderPausedMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('PAUSED', 95, 260);\n  ctx.fillText('PAUSED', 95, 260);\n};\n\nGame.prototype.renderGameOverMenu = function (ctx) {\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 100 );\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('Game Over', 67, 250);\n  ctx.fillText('Game Over', 67, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"r\" to replay.', 73, 275);\n};\n\nGame.prototype.renderMainMenu = function (ctx) {\n  if (this.menu !== \"main\") return;\n  ctx.beginPath();\n  ctx.rect(50, 200, 200, 150);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fill();\n  ctx.lineWidth = 2;\n  ctx.strokeStyle = 'black';\n  ctx.stroke();\n  ctx.font = \"18px 'Press Start 2P'\";\n  ctx.strokeStyle = 'black';\n  ctx.fillStyle = 'red';\n  ctx.strokeText('TETIS.JS', 70, 250);\n  ctx.fillText('TETIS.JS', 70, 250);\n  ctx.font = \"8px 'Press Start 2P'\";\n  ctx.fillStyle = 'black';\n  ctx.fillText('Press \"s\" to start.', 83, 275);\n  ctx.fillText('wasd - direction', 90, 300);\n  ctx.fillText('q/e - rotate left/right', 58, 325);\n};\n\nGame.prototype.removeMainMenu = function () {\n  this.menu = 'play';\n  document.getElementById('next-image').style.opacity = 1;\n};\n\nGame.prototype.randomPiece = function () {\n  const choose = Math.floor(Math.random() * NUM_PIECES + 1);\n  switch (choose) {\n    case 1:\n      return new Square(this.board);\n      break;\n    case 2:\n      return new Line(this.board);\n      break;\n    case 3:\n      return new LeftL(this.board);\n      break;\n    case 4:\n      return new RightL(this.board);\n      break;\n    case 5:\n      return new LeftZ(this.board);\n      break;\n    case 6:\n      return new RightZ(this.board);\n      break;\n    case 7:\n      return new Tee(this.board);\n      break;\n  }\n};\n\nGame.prototype.addPiece = function () {\n  let piece = this.nextPiece.shift();\n  this.nextPiece.push(this.randomPiece());\n  if (this.menu === 'main') {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  } else {\n    document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`;\n  }\n  this.pieces.push(piece);\n};\n\nGame.prototype.setNextPiece = function () {\n  this.nextPiece.push(this.randomPiece());\n};\n\nGame.prototype.hideNextPiece = function () {\n  document.getElementById('next-piece').innerHTML = `<img id=\"next-image\" style=\"opacity:0\" src=\"./tetris_assets/img/${this.nextPiece[0].name}.png\">`\n};\n\nGame.prototype.draw = function (ctx) {\n  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n  ctx.fillStyle = Game.BG_COLOR;\n  ctx.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  if (this.menu === 'main') {\n    this.renderMainMenu(ctx);\n  }\n\n  this.pieces.forEach( piece => {\n    piece.draw(ctx);\n  });\n\n  if (this.paused) {\n    this.renderPausedMenu(ctx);\n  }\n\n  if (this.menu === 'over') {\n    this.hideNextPiece();\n    this.renderGameOverMenu(ctx);\n  }\n};\n\nGame.prototype.setScore = function () {\n  let scoreTag       = document.getElementById('score');\n  scoreTag.innerHTML = this.score;\n  this.increaseFallRate();\n  firebase.database().ref('hi-scores').push({ name: \"whoever\", score: this.score });\n};\n\nGame.prototype.increaseFallRate = function () {\n  if (this.score % 2500 === 0 && this.score !== 0) {\n    Game.FALL_RATE += 1;\n    Game.OriginalFallRate += 1;\n  }\n}\n\nGame.prototype.movePiece = function (delta) {\n  const piece = this.pieces[this.pieces.length - 1];\n  const board = this.board;\n  for (let i = 0; i < piece.location.length; i++) {\n    if (this.paused || this.menu === 'main' || this.menu === 'over') {\n      Game.FALL_RATE = 0;\n    } else {\n      Game.FALL_RATE = Game.OriginalFallRate;\n    };\n    piece.location[i][1] += Game.FALL_RATE;\n  }\n};\n\nGame.prototype.checkForGameOver = function () {\n  if (this.board.isOver()) {\n    this.menu = 'over';\n  }\n};\n\nGame.prototype.reset = function (ctx) {\n  this.menu             = 'replay';\n  this.pieces           = [];\n  Game.FALL_RATE        = 2;\n  Game.OriginalFallRate = 2;\n  this.score            = 0;\n  this.nextPiece        = [];\n  this.setScore();\n  this.board.reset();\n};\n\nGame.prototype.step = function (delta, ctx) {\n  if (this.menu === 'replay') {\n    this.draw(ctx);\n    this.menu = 'play';\n  }\n  const lastPiece = this.pieces[this.pieces.length - 1];\n  if (this.pieces.length == 0) {\n    this.setNextPiece();\n    this.addPiece();\n  } else {\n    if (this.pieces.length > 0 && !this.board.isNextRowSet(lastPiece)) {\n      this.movePiece(delta);\n    } else {\n      this.checkForGameOver();\n      if (this.menu !== 'over') {\n        this.board.addPiece(lastPiece);\n        this.addPiece();\n      }\n      if (this.menu === 'over') {\n        this.movePiece(delta);\n      }\n      let fullRows = this.board.checkForFullRow();\n      if (Object.keys(fullRows).length > 0) {\n        this.score += Object.keys(fullRows).length * 100;\n        if (Object.keys(fullRows).length === 4) this.score += 400;\n        this.setScore();\n        this.board.clearRows(fullRows, ctx, Game.DIM_X, Game.BG_COLOR);\n      }\n    }\n  }\n};\n\n\nmodule.exports = Game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game.js\n **/","let boardAsArray = [\n// 0   1   2   3   4   5   6   7   8    9\n  [[], [], [], [], [], [], [], [], [], []], // 0\n  [[], [], [], [], [], [], [], [], [], []], // 1\n  [[], [], [], [], [], [], [], [], [], []], // 2\n  [[], [], [], [], [], [], [], [], [], []], // 3\n  [[], [], [], [], [], [], [], [], [], []], // 4\n  [[], [], [], [], [], [], [], [], [], []], // 5\n  [[], [], [], [], [], [], [], [], [], []], // 6\n  [[], [], [], [], [], [], [], [], [], []], // 7\n  [[], [], [], [], [], [], [], [], [], []], // 8\n  [[], [], [], [], [], [], [], [], [], []], // 9\n  [[], [], [], [], [], [], [], [], [], []], // 10\n  [[], [], [], [], [], [], [], [], [], []], // 11\n  [[], [], [], [], [], [], [], [], [], []], // 12\n  [[], [], [], [], [], [], [], [], [], []], // 13\n  [[], [], [], [], [], [], [], [], [], []], // 14\n  [[], [], [], [], [], [], [], [], [], []], // 15\n  [[], [], [], [], [], [], [], [], [], []], // 16\n  [[], [], [], [], [], [], [], [], [], []], // 17\n  [[], [], [], [], [], [], [], [], [], []], // 18\n  [[], [], [], [], [], [], [], [], [], []], // 19\n  [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n];\n\n\nconst Board = function () {\n  this.over = false;\n}\n\nBoard.prototype.isOver = function () {\n  return this.over;\n};\n\nBoard.prototype.reset = function () {\n  this.over = false;\n  boardAsArray = [\n  // 0   1   2   3   4   5   6   7   8    9\n    [[], [], [], [], [], [], [], [], [], []], // 0\n    [[], [], [], [], [], [], [], [], [], []], // 1\n    [[], [], [], [], [], [], [], [], [], []], // 2\n    [[], [], [], [], [], [], [], [], [], []], // 3\n    [[], [], [], [], [], [], [], [], [], []], // 4\n    [[], [], [], [], [], [], [], [], [], []], // 5\n    [[], [], [], [], [], [], [], [], [], []], // 6\n    [[], [], [], [], [], [], [], [], [], []], // 7\n    [[], [], [], [], [], [], [], [], [], []], // 8\n    [[], [], [], [], [], [], [], [], [], []], // 9\n    [[], [], [], [], [], [], [], [], [], []], // 10\n    [[], [], [], [], [], [], [], [], [], []], // 11\n    [[], [], [], [], [], [], [], [], [], []], // 12\n    [[], [], [], [], [], [], [], [], [], []], // 13\n    [[], [], [], [], [], [], [], [], [], []], // 14\n    [[], [], [], [], [], [], [], [], [], []], // 15\n    [[], [], [], [], [], [], [], [], [], []], // 16\n    [[], [], [], [], [], [], [], [], [], []], // 17\n    [[], [], [], [], [], [], [], [], [], []], // 18\n    [[], [], [], [], [], [], [], [], [], []], // 19\n    [[1], [1], [1], [1], [1], [1], [1], [1], [1], [1]]\n  ];\n};\n\nBoard.prototype.isNextRowSet = function (piece) {\n  for (let i = 0; i < piece.location.length; i++) {\n    let column = Math.abs(Math.floor(piece.location[i][0] / 30));\n    let row    = Math.floor(piece.location[i][1] / 30) + 1;\n    column > 9 ? column = 9 : column;\n    row < 0 ? row = 0 : row;\n    if (boardAsArray[row][column].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nBoard.prototype.checkForGameOver = function () {\n  return false;\n};\n\nBoard.prototype.getBoard = function () {\n  return boardAsArray;\n};\n\nBoard.prototype.checkForFullRow = function () {\n  const fullRows = {};\n\n  for (let i = 0; i < boardAsArray.length - 1; i++) {\n    let rowFull = true;\n    for (let j = 0; j < boardAsArray[0].length; j++) {\n      if (boardAsArray[i][j].length === 0) {\n        rowFull = false;\n      }\n    }\n    if (rowFull) {\n      fullRows[i] = boardAsArray[i];\n    }\n  }\n\n  return fullRows;\n};\n\nBoard.prototype.clearRows = function (rows, ctx, dim_x, color) {\n  for (let row in rows) {\n    if (rows.hasOwnProperty(row)) {\n      for (let i = 0; i < 10; i++) {\n        let index;\n        let piece = rows[row][i][0];\n        for (let h = 0; h < piece.location.length; h++) {\n          if (piece.location[h][0] === i * 30 && piece.location[h][1] === row * 30) {\n            index = h;\n          }\n        }\n        piece.location.splice(index, 1);\n        rows[row][i] = [];\n      }\n\n      ctx.beginPath();\n      ctx.rect(0, row * 30, dim_x, 30);\n      ctx.fillStyle = color;\n      ctx.fill();\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = color;\n      ctx.stroke();\n\n      for (let j = row - 1; j >= 0; j--) {\n        for (let k = 0; k < 10; k++) {\n          if (boardAsArray[j][k].length > 0) {\n            let piece = boardAsArray[j][k][0];\n            boardAsArray[j][k] = [];\n            for (let l = 0; l < piece.location.length; l++) {\n              if (piece.location[l][0] === k * 30 && piece.location[l][1] === j * 30) {\n                piece.location[l][1] += 30;\n                boardAsArray[j + 1][k] = [piece];\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nBoard.prototype.addPiece = function (piece) {\n  for (let i = 3; i >= 0; i--) {\n    if (piece.location[i][1] < 0) {\n      piece.location.splice(i, 1);\n      this.over = true;\n    }\n  }\n\n  piece.location.forEach( block => {\n    const column = Math.floor(block[0] / 30);\n    const row    = Math.floor(block[1] / 30);\n    block[0]     = column * 30;\n    block[1]     = row * 30;\n    boardAsArray[row][column] = [piece];\n  });\n};\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/board.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Square = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.RED;\n  this.location = [\n    [150, -60],\n    [120, -60],\n    [150, -90],\n    [120, -90]\n  ];\n  this.name = \"Square\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nSquare.prototype = new Surrogate();\n\nmodule.exports = Square;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/square.js\n **/","const PIECE_SIZE = 30;\nconst MOVES = {\n  LEFT        : \"left\",\n  RIGHT       : \"right\",\n  DOWN        : \"down\",\n  ROTATE_LEFT : \"rotate left\"\n}\nconst Piece = function (board) {\n  this.board    = board.getBoard()\n  this.set      = false;\n  this.color    = null;\n  this.location = [];\n};\nPiece.prototype.move = function(direction) {\n  switch (direction) {\n    case MOVES.RIGHT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] >= 270 || this.checkColRight()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] <= 270) {\n          this.location[i][0] += 30;\n        }\n      }\n    break;\n    case MOVES.LEFT:\n      for (let j = 0; j < this.location.length; j++) {\n        if (this.location[j][0] <= 0 || this.checkColLeft()) {\n          return;\n        }\n      }\n      for (let i = 0; i < this.location.length; i++) {\n        if (this.location[i][0] >= 0) {\n          this.location[i][0] -= 30;\n        }\n      }\n      break;\n      case MOVES.DOWN:\n        for (let j = 0; j < this.location.length; j++) {\n          if (this.location[j][1] <= 0) {\n            return;\n          }\n        }\n        for (let i = 0; i < this.location.length; i++) {\n          this.location[i][1] += 10;\n        }\n        break;\n  }\n},\nPiece.prototype.checkColLeft = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnLeft  = Math.ceil(this.location[i][0] / 30) - 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnLeft < 0 ? columnLeft = 0 : columnLeft;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnLeft].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.isSpaceTaken = function (block) {\n  let column = Math.abs(Math.floor(block[0] / 30));\n  let row    = Math.floor(block[1] / 30);\n  column > 9 ? column = 9 : column;\n  row < 0 ? row = 0 : row;\n\n  if (this.board[row][column].length > 0 || block[0] >= 300 || block[0] < 0) {\n    return true;\n  }\n\n  return false;\n};\nPiece.prototype.checkColRight = function () {\n  for (let i = 0; i < this.location.length; i++) {\n    let columnRight = Math.ceil(this.location[i][0] / 30) + 1;\n    let row         = Math.ceil(this.location[i][1] / 30);\n    columnRight > 9 ? columnRight = 9 : columnRight;\n    row < 0 ? row = 0 : row;\n    if (this.board[row][columnRight].length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\nPiece.prototype.draw = function (ctx) {\n  this.location.forEach( block => {\n    ctx.beginPath();\n    ctx.rect(block[0], block[1], PIECE_SIZE, PIECE_SIZE );\n    ctx.fillStyle = this.color;\n    ctx.fill();\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = 'black';\n    ctx.stroke();\n  });\n};\nPiece.prototype.rotateLeft = function (paused) {\n\n};\nPiece.prototype.rotateRight = function(paused) {\n\n};\n\nmodule.exports = Piece;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/piece.js\n **/","const colorConstants = {\n  RED    : '#F00',\n  BLUE   : '#00F',\n  GREEN  : '#0F0',\n  YELLOW : '#FFFF00',\n  PURPLE : '#BF5FFF',\n  ORANGE : '#FFA500',\n  PINK   : '#FF69B4'\n}\n\nmodule.exports = colorConstants;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/color_constants.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Line = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.BLUE;\n  this.location = [\n    [120, -150],\n    [120, -120],\n    [120, -90],\n    [120, -60]\n  ];\n  this.name = \"Line\"\n}\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLine.prototype = new Surrogate();\nLine.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] -= rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLine.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 60) {\n      this.location[i][0] += rotation\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is right\n    if (this.location[i][0] === originBlock[0] + 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation\n      continue;\n    }\n\n    //block is top\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 60) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is left\n    if (this.location[i][0] === originBlock[0] - 60 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\n\nmodule.exports = Line;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/line.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.GREEN;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"LeftL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftL.prototype = new Surrogate();\nLeftL.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftL.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightL = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PURPLE;\n  this.location = [\n    [120, -120],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"RightL\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightL.prototype = new Surrogate();\nRightL.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightL.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_l.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst LeftZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.YELLOW;\n  this.location = [\n    [90, -90],\n    [120, -90],\n    [120, -60],\n    [150, -60]\n  ];\n  this.name = \"LeftZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nLeftZ.prototype = new Surrogate();\nLeftZ.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nLeftZ.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = LeftZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/left_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst RightZ = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.ORANGE;\n  this.location = [\n    [150, -90],\n    [120, -90],\n    [120, -60],\n    [90, -60]\n  ];\n  this.name = \"RightZ\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nRightZ.prototype = new Surrogate();\nRightZ.prototype.rotateRight = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nRightZ.prototype.rotateLeft = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      case 3:\n        rotation = 60;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //DISTANCE BLOCK\n    //==============\n\n    //block is bottom left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is top left\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][0] += rotation;\n      continue;\n    }\n\n    //block is top right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] - 30) {\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is bottom right\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = RightZ;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/right_z.js\n **/","const Piece          = require('./piece');\nconst colorConstants = require('./color_constants');\n\nconst Tee = function (board) {\n  Piece.call(this, board);\n  this.color = colorConstants.PINK;\n  this.location = [\n    [120, -90],\n    [120, -60],\n    [150, -60],\n    [90, -60]\n  ];\n  this.name = \"Tee\";\n}\n\nfunction Surrogate() {};\nSurrogate.prototype = Piece.prototype;\nTee.prototype = new Surrogate();\nTee.prototype.rotateLeft = function(paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []];\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nTee.prototype.rotateRight = function (paused) {\n  if (paused) return;\n  const originBlock      = this.location[1];\n  const originalLocation = [[], [], [], []]\n  for (let k = 0; k < this.location.length; k++) {\n    for (let l = 0; l < 2; l++) {\n      originalLocation[k][l] = this.location[k][l];\n    }\n  }\n\n  for (let i = 0; i < this.location.length; i ++) {\n    let rotation;\n    switch (i) {\n      case 1:\n        rotation = 0;\n        break;\n      default:\n        rotation = 30;\n    }\n\n    //block is above originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] - 30 ) {\n      this.location[i][0] += rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n    //block is to right of originBlock\n    if (this.location[i][0] === originBlock[0] + 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] += rotation;\n      continue;\n    }\n\n    //block is below originBlock\n    if (this.location[i][0] === originBlock[0] && this.location[i][1] === originBlock[1] + 30) {\n      this.location[i][0] -= rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n\n    //block is to left of originBlock\n    if (this.location[i][0] === originBlock[0] - 30 && this.location[i][1] === originBlock[1]) {\n      this.location[i][0] += rotation;\n      this.location[i][1] -= rotation;\n      continue;\n    }\n  }\n\n  for (let j = 0; j < this.location.length; j++) {\n    if (this.isSpaceTaken(this.location[j])) {\n      this.location = originalLocation;\n    }\n  }\n};\nmodule.exports = Tee;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/pieces/t.js\n **/","const GameView = function (game, ctx) {\n  this.ctx = ctx;\n  this.game = game;\n};\n\nGameView.MOVES = {\n  'a' : 'left',\n  's' : 'down',\n  'd' : 'right',\n};\n\n\nGameView.prototype.bindKeyHandlers = function () {\n  if (this.game.menu === 'main') {\n    key('s', () => { this.game.removeMainMenu(); });\n  }\n\n  Object.keys(GameView.MOVES).forEach( k => {\n    let direction = GameView.MOVES[k];\n    key(k, () => { this.game.pieces[this.game.pieces.length - 1].move(direction); });\n  });\n  key('r', () => { this.replay(); });\n  key('p', () => { this.game.togglePause(); });\n  key('q', () => { this.game.pieces[this.game.pieces.length - 1].rotateLeft(this.game.paused); });\n  key('e', () => { this.game.pieces[this.game.pieces.length - 1].rotateRight(this.game.paused); });\n};\n\nGameView.prototype.replay = function () {\n  if (this.game.menu !== 'over') return;\n  this.game.reset(this.ctx);\n};\n\nGameView.prototype.start = function () {\n  this.bindKeyHandlers();\n  this.lastTime = 0;\n  let highScore = document.getElementById(\"hi-list\");\n  let data = firebase.database().ref('hi-scores');\n  highScore.innerHTML = data;\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.animate = function(time) {\n  const timeDelta = time - this.lastTime;\n\n  this.game.step(timeDelta, this.ctx);\n  this.game.draw(this.ctx);\n  this.lastTime = time\n\n  requestAnimationFrame(this.animate.bind(this));\n};\n\nmodule.exports = GameView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./tetris_assets/js/game_view.js\n **/"],"sourceRoot":""}